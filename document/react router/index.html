<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lucas文档库</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="compass.svg">
    <meta name="description" content="Lucas document collection">
    
    <link rel="preload" href="/front-end-progress-track/assets/css/0.styles.1c631b42.css" as="style"><link rel="preload" href="/front-end-progress-track/assets/js/app.55fbb09c.js" as="script"><link rel="preload" href="/front-end-progress-track/assets/js/2.3c044b6f.js" as="script"><link rel="preload" href="/front-end-progress-track/assets/js/1.946bbbaf.js" as="script"><link rel="preload" href="/front-end-progress-track/assets/js/22.67b70316.js" as="script"><link rel="prefetch" href="/front-end-progress-track/assets/js/10.100ad0ba.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/11.11c89185.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/12.452422eb.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/13.cdbffaeb.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/14.29cb1f24.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/15.25a9f6f1.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/16.1008613e.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/17.e87875c8.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/18.21caedd4.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/19.261180c5.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/20.35b1a1eb.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/21.e78369f6.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/23.f866a84e.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/24.6ffc8fb8.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/25.2594d9bd.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/26.3cdec195.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/27.98585499.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/28.7910915e.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/29.a483cbdd.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/3.945872b5.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/30.c84d22d4.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/31.982a1c57.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/32.3c98e77b.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/33.17ee5942.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/34.1e87628b.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/35.6e127866.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/36.5af02e95.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/37.065e5dc3.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/4.e5e6a7bb.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/5.d63af971.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/6.489cfffe.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/7.0c7d04fe.js"><link rel="prefetch" href="/front-end-progress-track/assets/js/vendors~docsearch.c632dcce.js">
    <link rel="stylesheet" href="/front-end-progress-track/assets/css/0.styles.1c631b42.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/front-end-progress-track/" class="home-link router-link-active"><img src="/front-end-progress-track/compass.svg" alt="Lucas文档库" class="logo"> <span class="site-name can-hide">Lucas文档库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/front-end-progress-track/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/front-end-progress-track/blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档" class="mobile-dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/js/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/http/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/nodejs/" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/ts/" class="nav-link">
  Typescript
</a></li></ul></div></div><div class="nav-item"><a href="/front-end-progress-track/document/react%20router/.html" class="nav-link">
  Github
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front-end-progress-track/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/front-end-progress-track/blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档" class="mobile-dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/js/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/http/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/nodejs/" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/front-end-progress-track/document/ts/" class="nav-link">
  Typescript
</a></li></ul></div></div><div class="nav-item"><a href="/front-end-progress-track/document/react%20router/.html" class="nav-link">
  Github
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>React router</p> <h1 id="react-router"><a href="#react-router" class="header-anchor">#</a> react router</h1> <h1 id="react-router-和-react-router-dom-这个库的区别"><a href="#react-router-和-react-router-dom-这个库的区别" class="header-anchor">#</a> react-router 和 react-router-dom 这个库的区别？</h1> <p>react-router-dom（浏览器专用）内部实际上依赖 react-router 这个库的。</p> <h1 id="如何实现组件懒加载-开启分包"><a href="#如何实现组件懒加载-开启分包" class="header-anchor">#</a> 如何实现组件懒加载 (开启分包)</h1> <p><code>React.lazy(() =&gt; import('././component.ts'))</code></p> <h1 id="如何做组件加载过程中统一的-loading"><a href="#如何做组件加载过程中统一的-loading" class="header-anchor">#</a> 如何做组件加载过程中统一的 Loading</h1> <p><code>&lt;Suspense fallback={&lt;Loading /&gt;}&gt;&lt;/Suspense&gt;</code></p> <h1 id="单页面和多页面的区别"><a href="#单页面和多页面的区别" class="header-anchor">#</a> 单页面和多页面的区别</h1> <h2 id="多页面"><a href="#多页面" class="header-anchor">#</a> 多页面</h2> <ul><li>多页面实际就是多个 html， 通过 window.location 相互跳转</li> <li>缺点：每个页面跳转都要刷新， 重新加载资源， 性能比较慢</li> <li>优点： seo 友好， c 端， 隔离性好， 每一个页面是一个独立的项目</li></ul> <h2 id="单页面"><a href="#单页面" class="header-anchor">#</a> 单页面</h2> <ul><li>好处：在一个 html 中进行路由跳转，实际上是通过 js 去控制的。代表性的框架 react/vue。比较适合 B 端的项目，不考虑 SEO。</li> <li>页面跳转不用刷新，性能会好一些，用户体验也能好，可以实现代码复用。</li> <li>缺陷： SEO 不好</li></ul> <h2 id="browserrouter-99"><a href="#browserrouter-99" class="header-anchor">#</a> BrowserRouter（99%）</h2> <ul><li>后台做一些配置</li> <li>问题： browserRouter 在使用的时候会遇到 404 的问题/BrowserRouter 配置过程中有没有遇到过一些坑？
需要后台配合，否则会出现 404 的问题。
服务端使用：</li></ul> <ol><li>正则匹配</li> <li>通配符
<img src="/front-end-progress-track/assets/img/brow1.4394b3c0.png" alt="browrouter"> <img src="/front-end-progress-track/assets/img/brow2.3cece462.png" alt="browrouter"></li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import { BrowserRouter, Route, Routes } from 'react-router-dom'

const root = ReactDOM.createRoot(document.getElementById('root'));

function Bpp () {
  return (
    &lt;h1&gt;bpp&lt;/h1&gt;
  )
}

root.render(
  &lt;BrowserRouter basename='pc'&gt;
    &lt;Routes&gt;
      &lt;Route path=&quot;/app&quot; element={&lt;App /&gt;} /&gt;
      &lt;Route path=&quot;/bpp&quot; element={&lt;Bpp /&gt;} /&gt;
    &lt;/Routes&gt;
  &lt;/BrowserRouter&gt;
);

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="hashrouter"><a href="#hashrouter" class="header-anchor">#</a> HashRouter</h2> <ul><li>了解即可，非必要不要使用这种方式
缺陷：</li></ul> <ol><li>很丑</li> <li>后期要改造服务端渲染很不方便</li></ol> <h2 id="memoryrouter"><a href="#memoryrouter" class="header-anchor">#</a> MemoryRouter</h2> <p>内存型路由
应用场景： 单测</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import * as React from &quot;react&quot;;
import { create } from &quot;react-test-renderer&quot;;
import {
  MemoryRouter,
  Routes,
  Route,
} from &quot;react-router-dom&quot;;

describe(&quot;My app&quot;, () =&gt; {
  it(&quot;renders correctly&quot;, () =&gt; {
    let renderer = create(
      &lt;MemoryRouter initialEntries={[&quot;/users/mjackson&quot;]}&gt;
        &lt;Routes&gt;
          &lt;Route path=&quot;users&quot; element={&lt;Users /&gt;}&gt;
            &lt;Route path=&quot;:id&quot; element={&lt;UserProfile /&gt;} /&gt;
          &lt;/Route&gt;
        &lt;/Routes&gt;
      &lt;/MemoryRouter&gt;
    );

    expect(renderer.toJSON()).toMatchSnapshot();
  });
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="nativerouter"><a href="#nativerouter" class="header-anchor">#</a> NativeRouter</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>import * as React from &quot;react&quot;;
import { NativeRouter } from &quot;react-router-native&quot;;

function App() {
  return (
    &lt;NativeRouter&gt;
      {/* The rest of your app goes here */}
    &lt;/NativeRouter&gt;
  );
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="staticrouter"><a href="#staticrouter" class="header-anchor">#</a> StaticRouter</h2> <p>静态路由</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import * as React from &quot;react&quot;;
import * as ReactDOMServer from &quot;react-dom/server&quot;;
import { StaticRouter } from &quot;react-router-dom/server&quot;;
import http from &quot;http&quot;;

function requestHandler(req, res) {
  let html = ReactDOMServer.renderToString(
    &lt;StaticRouter location={req.url}&gt;
      {/* The rest of your app goes here */}    &lt;/StaticRouter&gt;
  );

  res.write(html);
  res.end();
}

http.createServer(requestHandler).listen(3000);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="outlet"><a href="#outlet" class="header-anchor">#</a> outlet</h2> <p>子页面的占位符。
我们要实现通用的 header，就是用这个玩意。</p> <h2 id="uselocation-usenavigate"><a href="#uselocation-usenavigate" class="header-anchor">#</a> useLocation || useNavigate</h2> <p>可以获取一些 navigate 路由过来的状态
navigate(-1) 返回上一个路径</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import { Outlet, useNavigate } from &quot;react-router-dom&quot;

function Layout () {

    const navigate = useNavigate()

    console.log('navigate',navigate )

    return (
        &lt;div&gt;
            &lt;h1&gt;我是通用的头部&lt;/h1&gt;
            &lt;button onClick={() =&gt; navigate('/app')}&gt;跳转到App&lt;/button&gt;

            &lt;button onClick={() =&gt; navigate('/bpp', {
                state: {
                    user_id: 'james',
                    from: 'layout'
                }
            })}&gt;跳转到bpp&lt;/button&gt;
            &lt;Outlet /&gt;
        &lt;/div&gt;
    )
}

export default  Layout
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="动态路由"><a href="#动态路由" class="header-anchor">#</a> 动态路由</h2> <p>useParams</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import { HashRouter, BrowserRouter, Route, Routes, useLocation, useParams } from 'react-router-dom';
import Layout from './layout';

const root = ReactDOM.createRoot(document.getElementById('root'));

function Bpp() {

  const location = useLocation()
  console.log('location bpp',location)
  return (
    &lt;h1&gt;bpp&lt;/h1&gt;
  )
}

// baidu.com/user/1231242989899

function User () {

  const params = useParams()

  console.log('params',params)
  return (
    &lt;h1&gt;{params.id}&lt;/h1&gt;
  )
}

root.render(
  &lt;BrowserRouter&gt;
    &lt;Routes&gt;
      &lt;Route path='/' element={&lt;Layout /&gt;}&gt;

        &lt;Route path=&quot;/app&quot; element={&lt;App /&gt;} /&gt;
        &lt;Route path='/bpp' element={&lt;Bpp /&gt;} /&gt;
        &lt;Route path='/user/:id/:name' element={&lt;User /&gt;} /&gt;
      &lt;/Route&gt;
    &lt;/Routes&gt;
  &lt;/BrowserRouter&gt;

);

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h2 id="获取查询参数-usesearchparams"><a href="#获取查询参数-usesearchparams" class="header-anchor">#</a> 获取查询参数 useSearchParams</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>
function User () {

  const params = useParams()

  const [searchParams, setParams] = useSearchParams()

  const name = searchParams.get('psw')
  console.log('name',name)
  // console.log('search',searchParams,setParams)
  return (
    &lt;h1&gt;{params.id}&lt;/h1&gt;
  )
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="设置查询参数"><a href="#设置查询参数" class="header-anchor">#</a> 设置查询参数</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>function User () {

  const params = useParams()

  const [searchParams, setParams] = useSearchParams()

  const name = searchParams.get('psw')
  console.log('name',name)
  // console.log('search',searchParams,setParams)
  return (
    &lt;div&gt;
      &lt;h1&gt;{params.id}&lt;/h1&gt;
      &lt;button onClick={() =&gt; setParams({
        name: 'durant',
        age: 18
        })}&gt;设置用户&lt;/button&gt;
    &lt;/div&gt;

  )
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="link-标签-路由跳转"><a href="#link-标签-路由跳转" class="header-anchor">#</a> Link 标签 路由跳转</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>import { Link, Outlet, useNavigate } from &quot;react-router-dom&quot;

function Layout() {

    const navigate = useNavigate()

    console.log('navigate', navigate)

    return (
        &lt;div&gt;
            &lt;h1&gt;我是通用的头部&lt;/h1&gt;
            &lt;button onClick={() =&gt; navigate('/app')}&gt;跳转到App&lt;/button&gt;

            &lt;button onClick={() =&gt; navigate('/bpp', {
                state: {
                    user_id: 'james',
                    from: 'layout'
                }
            })}&gt;跳转到bpp&lt;/button&gt;

            &lt;button onClick={() =&gt; navigate(-1)}&gt;返回&lt;/button&gt;

            &lt;button&gt;
                &lt;Link to='/bpp'&gt;跳转到bpp&lt;/Link&gt;
            &lt;/button&gt;

            &lt;Outlet /&gt;
        &lt;/div&gt;
    )
}

export default Layout
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="usematch"><a href="#usematch" class="header-anchor">#</a> useMatch</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import { HashRouter, BrowserRouter, Route, Routes, useLocation, useParams, useSearchParams, useNavigation, useMatch} from 'react-router-dom';
import Layout from './layout';

const root = ReactDOM.createRoot(document.getElementById('root'));

function Bpp() {

const location = useLocation()

console.log('location bpp',location)
return (
&lt;h1&gt;bpp&lt;/h1&gt;
)
}

// baidu.com/user/1231242989899

function User () {

const params = useParams()

const match = useMatch('/user/:id')
console.log('match', match)

return (
&lt;div&gt;
&lt;h1&gt;{params.id}&lt;/h1&gt;
&lt;button&gt;设置用户&lt;/button&gt;
&lt;/div&gt;

)
}

root.render(
&lt;BrowserRouter&gt;
&lt;Routes&gt;
&lt;Route path='/' element={&lt;Layout /&gt;}&gt;

        &lt;Route path=&quot;/app&quot; element={&lt;App /&gt;} /&gt;
        &lt;Route path='/bpp' element={&lt;Bpp /&gt;} /&gt;
        &lt;Route path='/user/:id' element={&lt;User /&gt;} /&gt;
      &lt;/Route&gt;
    &lt;/Routes&gt;

  &lt;/BrowserRouter&gt;

);

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h1 id="数据路由"><a href="#数据路由" class="header-anchor">#</a> 数据路由</h1> <ol><li>革命性创新，地位=fiber 架构</li> <li>项目优化带来革命性的优化思路</li></ol> <h2 id="createbrowserrouter"><a href="#createbrowserrouter" class="header-anchor">#</a> createBrowserRouter</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>
import React, { useEffect } from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import { HashRouter, BrowserRouter, Route, Routes, useLocation, useParams, useSearchParams, useNavigation, useMatch, createBrowserRouter, RouterProvider, createRoutesFromElements } from 'react-router-dom';
import Layout from './layout';

const root = ReactDOM.createRoot(document.getElementById('root'));

function Bpp() {

  const location = useLocation()

  console.log('location bpp', location)
  return (
    &lt;h1&gt;bpp&lt;/h1&gt;
  )
}

// baidu.com/user/1231242989899

function User() {

  const params = useParams()

  const match = useMatch('/user/:id')
  console.log('match', match)

  return (
    &lt;div&gt;
      &lt;h1&gt;{params.id}&lt;/h1&gt;
      &lt;button&gt;设置用户&lt;/button&gt;
    &lt;/div&gt;

  )
}

// 变化2
const router = createBrowserRouter(createRoutesFromElements(
    &lt;Route path='/' element={&lt;Layout /&gt;}&gt;
      &lt;Route path=&quot;/app&quot; element={&lt;App /&gt;} /&gt;
      &lt;Route path='/bpp' element={&lt;Bpp /&gt;} /&gt;
      &lt;Route path='/user/:id' element={&lt;User /&gt;} /&gt;
    &lt;/Route&gt;
))

// 变化1
root.render(
  &lt;RouterProvider router={router} /&gt;
);


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h2 id="useloaderdata"><a href="#useloaderdata" class="header-anchor">#</a> useLoaderData</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>import React, { useEffect, useState } from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import { HashRouter, BrowserRouter, Route, Routes, useLocation, useParams, useSearchParams, useNavigation, useMatch, createBrowserRouter, RouterProvider, createRoutesFromElements, useLoaderData } from 'react-router-dom';
import Layout from './layout';
import axios from 'axios';

const root = ReactDOM.createRoot(document.getElementById('root'));

function Bpp() {

  const location = useLocation()

  console.log('location bpp', location)
  return (
    &lt;h1&gt;bpp&lt;/h1&gt;
  )
}

// baidu.com/user/1231242989899

function User() {

  const params = useParams()

  const res = useLoaderData()
  console.log('res', res)

  // const [name, setName] = useState('')

  // useEffect(() =&gt; {
  //   axios.get('/user').then((res) =&gt; {
  //     setName(res.data.data.name)
  //   })
  // },[])

  return (
    &lt;div&gt;
      &lt;h1&gt;{params.id}&lt;/h1&gt;
      &lt;h2&gt;{res.data.data.name}&lt;/h2&gt;
    &lt;/div&gt;
  )
}

// 变化2
const router = createBrowserRouter(createRoutesFromElements(
    &lt;Route path='/' element={&lt;Layout /&gt;}&gt;
      &lt;Route path=&quot;/app&quot; element={&lt;App /&gt;} /&gt;
      &lt;Route path='/bpp' element={&lt;Bpp /&gt;} /&gt;
      &lt;Route loader={async (params) =&gt; {
        // console.log('params', params)
        const res = await axios.get('/user')
        return res
      }} path='/user/:id' element={&lt;User /&gt;} /&gt;
    &lt;/Route&gt;
))

// 变化1
root.render(
  &lt;RouterProvider router={router} /&gt;
);

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h3 id="可以通过-loader-的入参来获取一些路由参数-比如-url"><a href="#可以通过-loader-的入参来获取一些路由参数-比如-url" class="header-anchor">#</a> 可以通过 loader 的入参来获取一些路由参数， 比如 URL</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>const router = createBrowserRouter(createRoutesFromElements(
    &lt;Route path='/' element={&lt;Layout /&gt;}&gt;
      &lt;Route path=&quot;/app&quot; element={&lt;App /&gt;} /&gt;
      &lt;Route path='/bpp' element={&lt;Bpp /&gt;} /&gt;
      &lt;Route loader={async (params) =&gt; {
        console.log('params', params)

        const url = params.request.url;
        const url_data = new URL(url)
        const name = url_data.searchParams.get('name')
        console.log('name', name)

        const res = await axios.get('/user')
        return res
      }} path='/user/:id' element={&lt;User /&gt;} /&gt;
    &lt;/Route&gt;
))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="使用数据路由优化瀑布流问题"><a href="#使用数据路由优化瀑布流问题" class="header-anchor">#</a> 使用数据路由优化瀑布流问题</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>const router = createBrowserRouter(createRoutesFromElements(
  &lt;Route path='/' element={&lt;Layout /&gt;}&gt;
    &lt;Route path=&quot;/app&quot; element={&lt;App /&gt;} /&gt;

    &lt;Route path='/bpp' element={&lt;Bpp /&gt;} /&gt;

    &lt;Route path='/user/:id' element={&lt;User /&gt;} /&gt;

    &lt;Route loader={async ({ request }) =&gt; {
      const res = await axios.get('/user')
      return res.data
    }} path='/project' element={&lt;Project /&gt;}&gt;
      &lt;Route path=':id' element={&lt;Projects /&gt;} /&gt;
    &lt;/Route&gt;

  &lt;/Route&gt;
))

import axios from &quot;axios&quot;
import { useEffect, useState } from &quot;react&quot;
import { Outlet, useLoaderData } from &quot;react-router&quot;

function Project() {
  // const [name, setName] = useState('')
  const data = useLoaderData()
  // useEffect(() =&gt; {
  //   axios.get('/user').then((res) =&gt; {
  //       console.log('res', res)
  //       const name = res.data.data.name
  //       setName(name)
  //   })
  // }, [])

  return (
    &lt;div&gt;
        &lt;h1&gt;{data.data.name}&lt;/h1&gt;
        &lt;Outlet /&gt;
    &lt;/div&gt;
  )
}

export default Project

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="数据路由-lazy-加载分包"><a href="#数据路由-lazy-加载分包" class="header-anchor">#</a> 数据路由 lazy 加载分包</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>  &lt;Route path='/' element={&lt;Layout /&gt;}&gt;
    &lt;Route path=&quot;/app&quot; element={&lt;App /&gt;} /&gt;
    &lt;Route path='/bpp' element={&lt;Bpp /&gt;} /&gt;
    &lt;Route path='/user/:id' element={&lt;User /&gt;} /&gt;
    &lt;Route
      loader={async ({ request }) =&gt; {
        const res = await axios.get('/user')
        return res.data
      }}
      path='/project'
      lazy={async () =&gt; {
        const data = await import('./project')
        const Project = data.default
        return {
          element: &lt;Project /&gt;
        }
      }} &gt;
    &lt;/Route&gt;
  &lt;/Route&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="router-v6-4解决的核心问题"><a href="#router-v6-4解决的核心问题" class="header-anchor">#</a> Router V6.4解决的核心问题？</h3> <p>它就是为解决瀑布流问题而生的。
可以实现，并行加载</p> <ol><li>路由对应的UI页面  /app =&gt; App组件</li> <li>分包组件的js</li> <li>拉取组件或者页面所需要的数据
核心：并行加载资源
<img src="/front-end-progress-track/assets/img/brow3.955a0026.png" alt="browrouter"></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/29/2024, 9:43:01 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/front-end-progress-track/assets/js/app.55fbb09c.js" defer></script><script src="/front-end-progress-track/assets/js/2.3c044b6f.js" defer></script><script src="/front-end-progress-track/assets/js/1.946bbbaf.js" defer></script><script src="/front-end-progress-track/assets/js/22.67b70316.js" defer></script>
  </body>
</html>
